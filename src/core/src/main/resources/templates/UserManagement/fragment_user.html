{#workarea title=usermsg:user_administration}
    <div>
        <div class="row">
            {#if workarea.newUser}
                {#form_start action=workarea.createURL()/}
            {#else} 
                {#form_start action=workarea.updateURL()/}
            {/if}

            <div class="row">
                <div class="col">

                    {#text_input workarea.user.name label=usermsg:user_name name="name" id="id-name" extra="required" validate=true}
                        {usermsg:user_must_have_name}
                    {/text_input}

                </div>
            </div>

            <div class="row">
                <div class="col">

                    {#text_input workarea.user.username label=usermsg:user_username name="username" id="id-username" extra="required" validate=true}
                        {usermsg:user_must_have_username}
                    {/text_input}

                </div>
                <div class="col">

                    {#text_input workarea.user.id label="UUID" name="uuid" id="id-uuid" extra="readonly" validate=false/}
 
                </div>
            </div>


            <div class="row">

                <div class="col">

                    {#text_input workarea.user.email label=usermsg:user_email name="email" id="id-email" extra="required" validate=true}
                        {usermsg:user_must_have_email}
                    {/text_input}

                </div>

                <div class="col">

                    {#if workarea.newUser}
                        {#password_input label=usermsg:user_password name="password" id="id-password" extra="required" validate=true}
                            {usermsg:user_must_have_password}
                        {/password_input}
                    {#else}
                        {#password_input label=usermsg:user_password name="password" id="id-password" extra="" validate=false/}
                    {/if}
        
                </div>
            </div>

            <div class="row">
                <div class="col mb-1">
                    {usermsg:user_roles}
                </div>
            </div>

            <div class="mb-3">
                    {#for role in workarea.roles}
                        {#if workarea.user.hasRole(role.name)}
                            {#checkbox_inline_input role.id label=role.longName name="roles" id=role.id extra="checked"/}
                        {#else}
                            {#checkbox_inline_input role.id label=role.longName name="roles" id=role.id extra=""/}
                        {/if}
                    {/for}
            </div>

            <div class="text-start pt-4">
                {#button_submit label=usermsg:user_save extra=""/}
                {#if !workarea.newUser}
                    {#button_action_submit label=usermsg:user_delete action=workarea.deleteURL() extra=""/}
                {/if}
                {#button_link label=usermsg:user_cancel action=workarea.uri extra="up-follow up-history=\"true\" up-target=\"#workarea\""/}
            </div>

        {#form_end/}
    </div>
</div>
{/workarea}
{#form_validate/}
